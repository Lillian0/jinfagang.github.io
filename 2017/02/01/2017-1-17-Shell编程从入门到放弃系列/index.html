<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Jintian">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Shell program from newbie to give up series"/>
  <meta property="og:description" content="Just my blog" />
  <meta property="og:site_name" content="Jin Tian"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.comundefined"/>
  
    <link rel="alternate" href="/atom.xml" title="Jin Tian" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Jin Tian</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.dark.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/girl1.jpeg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Shell program from newbie to give up series</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="/about">
                  
                  About
                  
                </a>
              </li>
            
              <li>
                <a href="/tags">
                  
                  Tag
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/jinfagang">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:jinfagang19@163.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Jintian</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-02-01</span>
            <span class="time">17:47:03</span>
          </span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/深度学习/">#深度学习</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h3 id="Shell-program-from-newbie-to-give-up-series"><a href="#Shell-program-from-newbie-to-give-up-series" class="headerlink" title="Shell program from newbie to give up series"></a>Shell program from newbie to give up series</h3><blockquote>
<p>This is a tutorial about <strong>shell program</strong>, powerful and faster your work on anywhere, so learn it hard, once you handler it, you can become a geek. If you have any question about this post, you can contact me via wechat: <code>jintianiloveu</code> , if you repost please stay with this copyright annoncement, enjoy :)</p>
</blockquote>
<h3 id="Chapter-1-File-Related"><a href="#Chapter-1-File-Related" class="headerlink" title="Chapter 1 File Related"></a>Chapter 1 File Related</h3><p>ok, in this chapter, the most important and you maybe face with most is file process, such as walk an directory or get all file names in a folder etc. Here I am going write down some useful shell commonds that will hopefully faster your work, even <strong>every faster ever than you think</strong>.</p>
<ul>
<li><strong>get all files and directories</strong><br>Here is one single script:<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="comment"># !/bin/bash</span></div><div class="line"><span class="keyword">for</span> file <span class="keyword">in</span> ~/home/data</div><div class="line"><span class="keyword">do</span></div><div class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;file&#125;</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>That’s it, you can access every file in a directory, if you want get both file and dirs, try this:<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">all=`ls ~/home/data`</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> all</div><div class="line"><span class="keyword">do</span></div><div class="line">    <span class="keyword">if</span> [ <span class="_">-d</span> <span class="variable">$f</span> ]; <span class="keyword">then</span></div><div class="line">        <span class="built_in">echo</span> <span class="variable">$&#123;f&#125;</span><span class="string">" is a directory"</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="built_in">echo</span> <span class="variable">$&#123;f&#125;</span><span class="string">" is a file"</span></div><div class="line">    <span class="keyword">fi</span></div></pre></td></tr></table></figure></p>
<ul>
<li><p><strong>file names and path related</strong><br>Most of the time we are annoying with file names and path, sometimes we want get the file name and another time we want the path. So here you cant use 2 powerful commod to solve all problems. They are <strong>basename</strong> and <strong>dirname</strong>. Look this example:</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>
</li>
<li><p><strong>cycle all names under an (or 2) folder</strong><br>This is a very instresting question. <code>for item in ..</code> this style is very usefule but we can’t cycle 2 items at the same time, indeed we will have this inquirement sometimes. Here I am going solver this using an example:<br>concate 2 folder’s file names into a txt file, say, folder1 have 1.jpg 2.jpg …, and folder2 have 1.txt 2.txt 3.txt…<br>we gonna generate a txt file like this:</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line"><span class="number">1</span><span class="selector-class">.jpg</span> <span class="number">1</span><span class="selector-class">.txt</span></div><div class="line"><span class="number">2</span><span class="selector-class">.jpg</span> <span class="number">2</span><span class="selector-class">.txt</span></div><div class="line">...</div></pre></td></tr></table></figure>
</li>
</ul>
<p>abviously, we have to cycle 2 elements at same time. <strong>But! For now we have no method to cycle 2 items in for..in..</strong> So we have to change our plan:<br>We can store the <code>ls |grep &#39;^-&#39;</code> out put into array or list, so we can get them in one for cycle. Here is the script:<br><figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">j=0</div><div class="line"><span class="keyword">for</span> img <span class="keyword">in</span> `ls <span class="variable">$&#123;data_root_dir&#125;</span>/Images|sort -h`</div><div class="line"><span class="keyword">do</span></div><div class="line">    img_list[<span class="variable">$&#123;j&#125;</span>]=<span class="variable">$&#123;img&#125;</span></div><div class="line">    ((j++))</div><div class="line"><span class="keyword">done</span></div><div class="line"></div><div class="line">k=0</div><div class="line"><span class="keyword">for</span> label <span class="keyword">in</span> `ls <span class="variable">$&#123;data_root_dir&#125;</span>/Labels|sort -h`</div><div class="line"><span class="keyword">do</span></div><div class="line">    label_list[<span class="variable">$&#123;k&#125;</span>]=<span class="variable">$&#123;label&#125;</span></div><div class="line">    ((k++))</div><div class="line"><span class="keyword">done</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;img_list[0]&#125;</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;label_list[0]&#125;</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> ((i=1;i&lt;=<span class="variable">$&#123;#img_list[@]&#125;</span>;i++))</div><div class="line"><span class="keyword">do</span></div><div class="line">    <span class="built_in">echo</span> <span class="variable">$i</span></div><div class="line">    left=<span class="variable">$&#123;img_list[i]&#125;</span></div><div class="line">    right=<span class="variable">$&#123;label_list[i]&#125;</span></div><div class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;left&#125;</span><span class="string">" "</span><span class="variable">$&#123;right&#125;</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure></p>
<p>This code is a little dumped, but I think you can quite get what this means.</p>
<h3 id="Chapter-2-About-txt-file-process"><a href="#Chapter-2-About-txt-file-process" class="headerlink" title="Chapter 2 About txt file process"></a>Chapter 2 About txt file process</h3><p>txt file is the most simple and wide-use file format, handler how to operate them will gaintly faster your work, and make you seems like a god!</p>
<ul>
<li><strong>Witre lines into txt file</strong><br>This is the most basic part of all jobs, and still, the most important. This 2 commond you must <strong>remember into your heart</strong>:<figure class="highlight haskell"><table><tr><td class="code"><pre><div class="line"><span class="title">echo</span> <span class="string">"Hello, world."</span> &gt; ~/<span class="class"><span class="keyword">data</span>/test.txt</span></div><div class="line"><span class="title">echo</span> <span class="string">"Hello, world."</span> &gt;&gt; ~/<span class="class"><span class="keyword">data</span>/test.txt</span></div><div class="line">&gt;: ~/<span class="class"><span class="keyword">data</span>/test.txt</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>first line: overwrite a string into a file<br>second line: add a line into a file<br>last line: truncate all content in a text file<br>Above is all the basic commond you <strong>have to handler</strong>, is simple yet powerful!</p>
<ul>
<li><strong>Generate a random array</strong><br>ok, another useful general commond that you maybe use all the time, but I think this is not the most simplest way to do this, the purpose is generate a random int array, so that use this we can shuffle txt lines or other things, here is the script:<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line">length_imgs=570</div><div class="line">arr=(`seq <span class="variable">$&#123;length_imgs&#125;</span>`)</div><div class="line"><span class="keyword">for</span> ((i=0;i&lt;10000;i++))</div><div class="line"><span class="keyword">do</span></div><div class="line">        <span class="built_in">let</span> <span class="string">"a=<span class="variable">$RANDOM</span>%<span class="variable">$&#123;length_imgs&#125;</span>"</span></div><div class="line">        <span class="built_in">let</span> <span class="string">"b=<span class="variable">$RANDOM</span>%<span class="variable">$&#123;length_imgs&#125;</span>"</span></div><div class="line">        tmp=<span class="variable">$&#123;arr[$a]&#125;</span></div><div class="line">        arr[<span class="variable">$a</span>]=<span class="variable">$&#123;arr[$b]&#125;</span></div><div class="line">        arr[<span class="variable">$b</span>]=<span class="variable">$tmp</span></div><div class="line"><span class="keyword">done</span></div><div class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#arr[@]&#125;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>if we get this random array, we can read random lines into a new txt file , liek this:<br><figure class="highlight stylus"><table><tr><td class="code"><pre><div class="line">boundry=<span class="number">20</span></div><div class="line"><span class="keyword">for</span> <span class="selector-tag">i</span> <span class="keyword">in</span> $&#123;arr[@]:$&#123;boundry&#125;&#125;</div><div class="line">do</div><div class="line">    sed -n <span class="string">"$&#123;i&#125;p"</span> test<span class="selector-class">.txt</span> &gt;&gt; newtest<span class="selector-class">.txt</span></div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>It’s simple enough! Now we have some random lines in <code>newtest.txt</code></p>
<ul>
<li><strong>Cut string</strong><br><strong>Very important part</strong>, to cut a string whatever we want is a very useful commond! And what you need is only one single cmoond <strong>cut</strong>.</li>
</ul>
<h3 id="Chapter-3-About-Mathmatic"><a href="#Chapter-3-About-Mathmatic" class="headerlink" title="Chapter 3 About Mathmatic"></a>Chapter 3 About Mathmatic</h3><p>Well, I have to say this part is a litter complicated, onething you must take in your mind is that <strong>Shell Does Not Support Decimal Calculate</strong>, though we still can find some method to approach our goal, one properly method is <strong>awk</strong>.<br>If you want to calculate 0.8x6 , you probbly can do those:</p>
<ul>
<li>$((0.8*6))</li>
<li>echo <code>expr 0.8*6</code><br>But you wont get what you want, because shell doesn’t support it. But hopefully you can do this:<figure class="highlight bash"><table><tr><td class="code"><pre><div class="line"><span class="built_in">echo</span> | awk <span class="string">'&#123;print 0.8*6&#125;'</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>you will got <code>4.2</code></p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Copyright <a target="_blank" href="https://github.com/jinfagang">Jintian</a>
          An Intelligent Scientist
          </p>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">DeepX</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

