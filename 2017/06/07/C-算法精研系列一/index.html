<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Jintian">
  <!-- Open Graph Data -->
  <meta property="og:title" content="C++ 算法精研系列一"/>
  <meta property="og:description" content="Just my blog" />
  <meta property="og:site_name" content="Jin Tian"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.comundefined"/>
  
    <link rel="alternate" href="/atom.xml" title="Jin Tian" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Jin Tian</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.dark.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/v.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">C++ 算法精研系列一</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="/about">
                  
                  About
                  
                </a>
              </li>
            
              <li>
                <a href="/tags">
                  
                  Tag
                  
                </a>
              </li>
            
              <li>
                <a href="/achievements">
                  
                  Achievements
                  
                </a>
              </li>
            
              <li>
                <a href="/resume">
                  
                  Resume
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/jinfagang">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:jinfagang19@163.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Jintian</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-06-07</span>
            <span class="time">13:01:20</span>
          </span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <h1 id="C-算法精细研究系列"><a href="#C-算法精细研究系列" class="headerlink" title="C++算法精细研究系列"></a>C++算法精细研究系列</h1><h1 id="经典问题一"><a href="#经典问题一" class="headerlink" title="经典问题一"></a>经典问题一</h1><blockquote>
<p>这个问题其实很经典，简而言之，就是一个数组中，有正有负，求取一个和最大的连续子数组。</p>
</blockquote>
<p>这几天在看算法，都得过一遍，但是要领会算法里面的思想，所有代码都用c++实现。首先咋一看这个问题，我们先不管最优算法是如何实现的，直接一顿暴力计算怎么样？<br>思考一下，暴力计算其实很简单，比如我们有数组：<br><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">int a[<span class="number">10</span>] = &#123;<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">-4</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-9</span>, <span class="number">-3</span>&#125;;</div></pre></td></tr></table></figure></p>
<p>那首先我们要遍历一下数组a，在每一个子循环里面，从i-&gt;a.size,遍历，i-&gt;a.size中的每个j，求取i-&gt;j的子序列和。三个遍历应该就可以把所有情况便利玩。<br>直接上代码了：<br><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">findMaxContinueSeq</span><span class="params">(<span class="keyword">int</span>* result, <span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span></span>&#123;</div><div class="line">    <span class="comment">// result, returns the bounds and max sum, size is the a list size</span></div><div class="line"></div><div class="line">    <span class="keyword">int</span> maxSum = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxStartIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxEndIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; size; ++j) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt; j; ++k) &#123;</div><div class="line">                sum += a[k];</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (sum &gt; maxSum) maxSum = sum, maxStartIndex = i, maxEndIndex = j<span class="number">-1</span>;</div><div class="line">            sum = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"max sum: "</span> &lt;&lt; maxSum &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"max start index: "</span>&lt;&lt; maxStartIndex &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"max end index: "</span>&lt;&lt; maxEndIndex &lt;&lt; <span class="built_in">endl</span>;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>我们设置两个标志位，一个是最大序列的起始一个是终止，起始出现的位置就在当和比暂存器大的时候，把这时候的i记录下来，终止就是j。<br>这个算法起始也很简单的。但是时间复杂度是o(n^3)，因为要遍历三个循环。</p>
<p>接下来我们看一个只需要一次循环就可以解决的算法。<br>这个最优算法，起始道理也是很简单，我就是遍历一次，首先假设一个b=0，每次加一个数，我都用b+a[i],然后我都判断一下，加完之后是大于0还是小于0，<br>如果小于0，那很显然，就抛弃b，把b重置为a[i]从新开始一个序列，加入不小于零，在判断一下b和暂存的最大值大小，如果大，就把暂存最大值更新，小就不管了。<br>这个算法其实用到了呀一个双重保险的思想，即首先添加一个数如果变成了负的，我就终端这个序列，重头开始，如果没有，再判断一下加了之后是变大了还是变小了，如果变大了就更新，没有就保存之前的值，实际上如果没有变大了说明加了一个负数，但是还没有小于零，没有小于零说明还有希望加到一个更大的正数，因此，不到b小于零都不要中断这个序列，一直加下去，实在是小于0了在重置b，开始下一个序列。<br>仔细想一下，这个算法其实，就是基于一个非常简单的假设：<strong>序列有正有负，最大和的序列一定大于零</strong>，既然如此那我就一直加，如果大于就更新不大于继续加，知道小于零就更新序列。<br>代码如下：<br><figure class="highlight cpp"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">findMaxContinueSeqOptimal</span><span class="params">(<span class="keyword">int</span>* result, <span class="keyword">int</span> a[], <span class="keyword">int</span> size)</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//算法思想很简单，首先最大值一定大于0，那么每次加一下下一个元素，我就</span></div><div class="line">    <span class="comment">//判断一下，上一个和，如果小于零则直接把b重置，否则加上下一个元素</span></div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> b=<span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxStartIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> maxEndIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</div><div class="line">        <span class="keyword">if</span> (b&lt;<span class="number">0</span>)&#123;</div><div class="line">            b = a[i];</div><div class="line">            maxStartIndex = i;</div><div class="line">        &#125; <span class="keyword">else</span>&#123;</div><div class="line">            b += a[i];</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (b&gt;sum)&#123;</div><div class="line">            sum = b;</div><div class="line">            maxEndIndex = i;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"optimal max sum: "</span> &lt;&lt; sum &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"max start index: "</span>&lt;&lt; maxStartIndex &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"max end index: "</span>&lt;&lt; maxEndIndex &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最后我们调用代码来测试一下：<br><figure class="highlight lsl"><table><tr><td class="code"><pre><div class="line">int main() &#123;</div><div class="line">    int a[<span class="number">10</span>] = &#123;<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">-4</span>, <span class="number">2</span>, <span class="number">-1</span>, <span class="number">-9</span>, <span class="number">-3</span>&#125;;</div><div class="line">    int b;</div><div class="line"></div><div class="line">    findMaxContinueSeq(a, a, <span class="number">10</span>);</div><div class="line">    findMaxContinueSeqOptimal(a, a, <span class="number">10</span>);</div><div class="line"></div><div class="line">    return <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>两个函数返回的结果是一致的。</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Copyright <a target="_blank" href="https://github.com/jinfagang">Jintian</a>
          An Intelligent Scientist
          </p>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">DeepX</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

