<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Jintian">
  <!-- Open Graph Data -->
  <meta property="og:title" content="有趣的算法问题之巧思妙想"/>
  <meta property="og:description" content="Just my blog" />
  <meta property="og:site_name" content="Jin Tian"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.comundefined"/>
  
    <link rel="alternate" href="/atom.xml" title="Jin Tian" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Jin Tian</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.dark.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/girl.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">有趣的算法问题之巧思妙想</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="/about">
                  
                  About
                  
                </a>
              </li>
            
              <li>
                <a href="/tags">
                  
                  Tag
                  
                </a>
              </li>
            
              <li>
                <a href="/achievements">
                  
                  Achievements
                  
                </a>
              </li>
            
              <li>
                <a href="/resume">
                  
                  Resume
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/jinfagang">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:jinfagang19@163.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Jintian</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-09-06</span>
            <span class="time">14:10:30</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/默认分类/">默认分类</a>
</span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>本文介绍 有趣的算法问题之巧思妙想<br><a id="more"></a></p>
<h1 id="有趣的算法问题之巧思妙想"><a href="#有趣的算法问题之巧思妙想" class="headerlink" title="有趣的算法问题之巧思妙想"></a>有趣的算法问题之巧思妙想</h1><blockquote>
<p>本文由在当地较为英俊的男子金天大神原创，版权所有，欢迎转载，本文首发地址 <a href="https://jinfagang.github.io" target="_blank" rel="external">https://jinfagang.github.io</a> 。但请保留这段版权信息，多谢合作，有任何疑问欢迎通过微信联系我交流：<code>jintianiloveu</code></p>
</blockquote>
<h2 id="有趣的算法"><a href="#有趣的算法" class="headerlink" title="有趣的算法"></a>有趣的算法</h2><p>算法之所以有趣，在于他能够化繁为简，他能概括统御世间万物，将一个复杂的问题归结为一个非常简单的问题。其实所有高阶的算法，都可以用两个大的方法去解决，而且屡试不爽。分别是<strong>动态规划</strong>和<strong>贪心算法</strong>.<br>我们先从一道动态规划的问题先说起吧。</p>
<h3 id="动态规划问题"><a href="#动态规划问题" class="headerlink" title="动态规划问题"></a>动态规划问题</h3><blockquote>
<p>最长公共子序列问题(LCS)，给定两个序列X和Y，求他们之间最长的公共子序列。</p>
</blockquote>
<p>哇，这题目感觉有点难啊。最长公共子序列问题其实可以归结为最最最最最简单的一个递推表达式，首先我们假设序列X元素个数为i，Y为j，C[i, j]表示最长公共子序列的长度。好那么问题就变成了，如何求取这个最长公共子序列的长度问题。公式也是非常简单 ==easy==  :smile:</p>
<p>$$C[i, j] = \left{ \begin{array}{lr} 0,\quad if \   x=0 \,  or \   y=0 \ C[i-1, j-1] + 1, \quad if \; i,j&gt;0 \; , x_i=y_i \ max{C[i, j-1], C[i-1, j]} , \quad if \ i,j&gt;0, \ x_i\neq x_j \end{array} \right. $$</p>
<p>这个公式还是非常难打啊，大概就是这么一个意思吧。咋一看这个表达式很牛逼啊，你随便给我两个序列，我通过他就可以求出最长子序列的长度？闲话不多说，让我们直接上代码看一下到底有没有这么牛逼。</p>
<p>假如我们有两个序列，我们用字符串来表示吧 X=cnblogs, Y=belong, 肉眼可以看到最长子序列为blog。那么长度就是4，让我们看看到底有没有这么牛逼。</p>
<p>在这之前，我得理清一下思路，首先是这样的，我们求取的这个C[i, j]，实际上就是一个二维的矩阵，你想啊i是从0变到i，j是从0变到j，那一路求过来，不就是一个i行j列的矩阵吗？目标值就是最右下角的这个元素。既然如此那么变成就好办了。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="comment">// this code calculate the max length of common sub-sequence of 2 strings</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcs_length</span><span class="params">(<span class="built_in">string</span> a, <span class="built_in">string</span> b)</span> </span>&#123;</div><div class="line">    <span class="comment">// given 2 string, return the LCS length</span></div><div class="line">    <span class="comment">// define a 2 dim array</span></div><div class="line">    <span class="keyword">int</span> matrix[a.size()+<span class="number">1</span>][b.size()+<span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= a.size(); ++i) &#123;</div><div class="line">        matrix[i][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= b.size(); ++j) &#123;</div><div class="line">        matrix[<span class="number">0</span>][j] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a.size(); i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= b.size(); j++) &#123;</div><div class="line">            <span class="keyword">if</span> (a[i<span class="number">-1</span>] == b[j<span class="number">-1</span>]) &#123;</div><div class="line">                matrix[i][j] = matrix[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                matrix[i][j] = matrix[i][j<span class="number">-1</span>] &gt; matrix[i<span class="number">-1</span>][j] ? matrix[i][j<span class="number">-1</span>] : matrix[i<span class="number">-1</span>][j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> matrix[a.size()][b.size()];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>很显然，这个函数可以正确的得到最长公共子串的长度。看上去还是很牛逼，但是其实道理也非常简单，无外乎就是上面的三个公式。那么你可能回问了，上面三个公式是怎么来的呢？其实就是一个非常简单的递推，假如说公共子串Z的最后一个元素是X的最后一个元素，那么肯定也是Y的最后元素，那如果将X去掉最后元素，Y去掉最后一个元素，最长公共子串就是去掉之后的+1，就是加去掉的这个嘛。那如果说最后一个元素都不是X， Y的最后元素，那更好办了，这个时候公共子串就是X和Y的中间某一个子串嘛，这个时候X去掉最后一个，再来求公共子串，还是一样啊，或者Y去掉一个，也是一样啊，就直接就等于X或者Y去掉一个的共同子串的最大值了。(有人会问，为什么不等于X，Y都去掉一个的最大值呢？也就是 $$ max{C[i-1, j-1], C[i-1, j-1]}$$， 这是不行的，原因很简单，你X去掉一个之后，最长子串就有可能包含Y的最后一个值了，你都去掉会减少很多种情况，不可取 )。</p>
<p>这个问题我们已经完成了历史性的一步： <strong>可以求取两个序列的最长子序列的长度。</strong>， 那么下一步就是，怎么找到这个最长子序列。这一步思路是这样的：</p>
<p>(你可能无法想象，我完成求最大公共子序列上调试C++代码踩了一下午坑，我曹，真的是天坑)。先说一下思路吧，非常复杂，首先在上面的函数里面我们给他传入一个pFlag的二维数组，注意这是一个指针，因为后面需要递归遍历他。在这个二维数组里面存储的大小和matrix是一样，只不过这里面存储的都是字符串，为了便于理解我存储为 : “left”, “up”, “left_up”，三种字符串，其实你如果自己画了matrix这个表，就会发现，其实可以通过这样的箭头去回溯这个最长子序列是什么，你会发现恰恰是箭头所指向的路径。然后我们用一个函数递归，根据箭头来找到对应的子序列。所有代码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">sub_sequence</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="built_in">string</span> **pFlag, <span class="built_in">string</span> a)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (i == <span class="number">0</span> || j == <span class="number">0</span>) &#123;</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (pFlag[i][j] == <span class="string">"left_up"</span>) &#123;</div><div class="line">        sub_sequence(i - <span class="number">1</span>, j - <span class="number">1</span>, pFlag, a);</div><div class="line">        <span class="built_in">cout</span> &lt;&lt; a[i<span class="number">-1</span>] &lt;&lt; <span class="string">" "</span>;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">if</span> (pFlag[i][j] == <span class="string">"left"</span>) &#123;</div><div class="line">            sub_sequence(i, j<span class="number">-1</span>, pFlag, a);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            sub_sequence(i<span class="number">-1</span>, j, pFlag, a);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">lcs_length</span><span class="params">(<span class="built_in">string</span> a, <span class="built_in">string</span> b, <span class="built_in">string</span> **pFlag)</span> </span>&#123;</div><div class="line">    <span class="comment">// given 2 string, return the LCS length</span></div><div class="line">    <span class="comment">// define a 2 dim array</span></div><div class="line">    <span class="keyword">int</span> matrix[a.size()+<span class="number">1</span>][b.size()+<span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= a.size(); ++i) &#123;</div><div class="line">        matrix[i][<span class="number">0</span>] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= b.size(); ++j) &#123;</div><div class="line">        matrix[<span class="number">0</span>][j] = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= a.size(); i++) &#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= b.size(); j++) &#123;</div><div class="line">            <span class="keyword">if</span> (a[i<span class="number">-1</span>] == b[j<span class="number">-1</span>]) &#123;</div><div class="line">                matrix[i][j] = matrix[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>;</div><div class="line">                <span class="comment">// using string to indicate location</span></div><div class="line">                pFlag[i][j] = <span class="string">"left_up"</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                <span class="keyword">if</span> (matrix[i][j<span class="number">-1</span>] &gt; matrix[i<span class="number">-1</span>][j]) &#123;</div><div class="line">                    matrix[i][j] = matrix[i][j<span class="number">-1</span>];</div><div class="line">                    pFlag[i][j] = <span class="string">"left"</span>;</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    matrix[i][j] = matrix[i<span class="number">-1</span>][j];</div><div class="line">                    pFlag[i][j] = <span class="string">"up"</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> matrix[a.size()][b.size()];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">string</span> b = <span class="string">"gheteuponthiop"</span>;</div><div class="line">    <span class="built_in">string</span> a = <span class="string">"giothuphyo"</span>;</div><div class="line">    <span class="comment">// 这里应该是**pFlag, markdown渲染有问题，二维指针</span></div><div class="line">    <span class="keyword">auto</span> ** pFlag = <span class="keyword">new</span> <span class="built_in">string</span>* [a.size() + <span class="number">1</span>];</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= a.size(); ++k) &#123;</div><div class="line">        pFlag[k] = <span class="keyword">new</span> <span class="built_in">string</span>[b.size() + <span class="number">1</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">int</span> l = lcs_length(a, b, pFlag);</div><div class="line">    sub_sequence((<span class="keyword">int</span>) a.size(), (<span class="keyword">int</span>) b.size(), pFlag, a);</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="built_in">cout</span> &lt;&lt; l &lt;&lt; <span class="built_in">endl</span>;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>收工！以后遇到求最大公共子序列问题就来我的博客！！！！</p>
<p>写到这里发现并不是那么有趣了。很复杂啊。。。不过坚信那句，万变不离其宗。</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Copyright <a target="_blank" href="https://github.com/jinfagang">Jintian</a>
          An Intelligent Scientist
          </p>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">DeepX</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

